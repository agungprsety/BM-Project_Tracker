import{j as e}from"./vendor-query-dOYxXkJ3.js";import{u as v}from"./index-DaHXQ4-S.js";import{b as w,i as P,c as D,j as $,k as j,a as C,l as k,f as r}from"./utils-BfptotOI.js";import{a as B}from"./exportPdf-s0IUKqir.js";import{C as p,B as S}from"./Button-Dqt4D0nT.js";import{P as W,a as I,B as V,W as E,S as F}from"./ProjectMap-ClYDLX7q.js";import{j as L,f as M}from"./vendor-react-CfkJOBur.js";import{h as R,E as z,l as A,j as Q}from"./vendor-icons-Jh-DJkRq.js";import"./vendor-pdf-D-ScUWta.js";import"./vendor-supabase-Dq-Jb853.js";import"./Input-8WHCH_aK.js";import"./vendor-charts-D7W35Enl.js";import"./vendor-maps-CQh9FGhc.js";function se(){var o,m;const{id:h}=L(),u=M(),{darkMode:s}=v(),{data:a,isLoading:g}=w(h);if(g)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!a)return e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(p,{darkMode:s,className:"text-center py-12",children:e.jsx("p",{className:"text-lg mb-4",children:"Project not found"})})});const t=a.boq||[],l=a.weeklyReports||[],i=P(t),c=D(t,l),f=$(l),n=t.reduce((b,x)=>{const N=Math.min(f[x.id]||0,x.quantity);return b+N*x.unitPrice},0),y=(a.length||0)*(a.averageWidth||0),d=s?"from-gray-800 to-gray-900 border-gray-700":"from-white to-gray-50 border-gray-100";return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("button",{onClick:()=>u("/explore"),className:`flex items-center gap-1 text-sm font-medium transition-colors ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(R,{size:16}),"Back to Directory"]})}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium ${s?"bg-blue-900/40 text-blue-300 border border-blue-700/50":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[e.jsx(z,{size:16}),e.jsxs("span",{children:["You are viewing this project in ",e.jsx("strong",{children:"read-only"})," mode."]})]}),e.jsxs(p,{darkMode:s,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:a.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:((o=a.workType)==null?void 0:o.replace("-"," "))||""}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s?"bg-green-900 text-green-300":"bg-green-100 text-green-700"}`,children:a.roadHierarchy||""}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s?"bg-purple-900 text-purple-300":"bg-purple-100 text-purple-700"}`,children:a.maintenanceType||""}),a.location&&e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s?"bg-amber-900 text-amber-300":"bg-amber-100 text-amber-700"}`,children:[e.jsx(A,{size:10,className:"inline mr-1"}),"Location Set"]})]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:["Project ID: ",a.id]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(S,{variant:"secondary",onClick:()=>B(a),children:[e.jsx(Q,{size:18,className:"mr-2"})," Export PDF"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:`bg-gradient-to-br p-6 rounded-xl border ${d}`,children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Project Info"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Contractor:"}),e.jsx("span",{className:"font-medium",children:a.contractor})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Supervisor:"}),e.jsx("span",{className:"font-medium",children:a.supervisor})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Dates:"}),e.jsxs("span",{className:"font-medium",children:[j(a.startDate)," - ",j(a.endDate)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Length:"}),e.jsx("span",{className:"font-medium",children:C(a.length)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Avg. Width:"}),e.jsx("span",{className:"font-medium",children:a.averageWidth?`${a.averageWidth} m`:"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Area:"}),e.jsx("span",{className:"font-medium",children:k(y)})]}),a.district&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"District:"}),e.jsx("span",{className:"font-medium",children:a.district})]}),a.subDistrict&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Sub-district:"}),e.jsx("span",{className:"font-medium",children:a.subDistrict})]})]})]}),e.jsxs("div",{className:`bg-gradient-to-br p-6 rounded-xl border ${d}`,children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Total Value:"}),e.jsx("span",{className:"font-bold text-blue-600",children:r(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Completed Value:"}),e.jsx("span",{className:"font-bold text-green-600",children:r(n)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Remaining Value:"}),e.jsx("span",{className:"font-bold text-amber-600",children:r(i-n)})]})]})]}),e.jsxs("div",{className:`bg-gradient-to-br p-6 rounded-xl border ${d}`,children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Progress Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Current Progress:"}),e.jsxs("span",{className:"font-bold text-purple-600",children:[c.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"BoQ Items:"}),e.jsxs("span",{className:"font-medium",children:[t.length," items"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Weekly Reports:"}),e.jsxs("span",{className:"font-medium",children:[l.length," weeks"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Photos:"}),e.jsxs("span",{className:"font-medium",children:[((m=a.photos)==null?void 0:m.length)||0," photos"]})]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:`flex justify-between text-sm mb-2 ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsx("span",{children:"Project Progress"}),e.jsxs("span",{children:[c.toFixed(2),"%"]})]}),e.jsx("div",{className:`w-full ${s?"bg-gray-700":"bg-gray-200"} rounded-full h-4`,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 h-4 rounded-full transition-all duration-500",style:{width:`${c}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs mt-1 text-gray-500",children:[e.jsxs("span",{children:[r(n)," completed"]}),e.jsxs("span",{children:[r(i-n)," remaining"]})]})]})]}),e.jsx(W,{project:a,darkMode:s}),e.jsx(I,{photos:a.photos||[],darkMode:s,readonly:!0}),e.jsx(V,{projectId:a.id,boq:t,onUpdate:()=>{},darkMode:s,readonly:!0}),e.jsx(E,{projectId:a.id,reports:l,boq:t,onUpdate:()=>{},contractStartDate:a.startDate,contractEndDate:a.endDate,darkMode:s,readonly:!0}),e.jsx(F,{project:a,darkMode:s})]})}export{se as default};
